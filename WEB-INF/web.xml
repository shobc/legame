<web-app>
<!--    リスナー　-->
    <listener>
        <listener-class>listener.LoadListener</listener-class>
    </listener>
<!--    URLを指定しない場合に行くページ　-->
    <welcome-file-list>
        <welcom-file>/WEB-INF/jsp/login.jsp</welcom-file>
    </welcome-file-list>
<!--    エラーページ -->
    <error-page>
        <error-code>404</error-code>
        <location>/WEB-INF/jsp/error/404.jsp</location>
    </error-page>

    <error-page>
        <exception-type>exception.NoRegisterAccountException</exception-type>
        <location>/WEB-INF/jsp/login.jsp</location>
    </error-page>
    <error-page>
        <exception-type>exception.StopAccountException</exception-type>
        <location>/WEB-INF/jsp/login.jsp</location>
    </error-page>
    <error-page>
        <exception-type>exception.SufferSearchIdException</exception-type>
        <location>/WEB-INF/jsp/change-profile.jsp</location>
    </error-page>

    <error-page>
        <exception-type>exception.SufferNewRegisterSearchIdException</exception-type>
        <location>/WEB-INF/jsp/register-profile.jsp</location>
    </error-page>
    <error-page>
        <exception-type>exception.DeleteTimeLineException</exception-type>
        <location>/WEB-INF/jsp/error/delete-timeline.jsp</location>
    </error-page>
    <error-page>
        <exception-type>exception.NoMatchRandomException</exception-type>
        <location>/WEB-INF/jsp/error/no-login.jsp</location>
    </error-page>
    <error-page>
        <exception-type>exception.SufferMailException</exception-type>
        <location>/WEB-INF/jsp/error/no-login.jsp</location>
    </error-page>
<!--    フィルタ -->
<!--    文字コードを設定している-->
    <filter>
        <filter-name>FilterEncoding</filter-name>
        <filter-class>filter.FilterEncoding</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>windows-31j</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>FilterEncoding</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <filter>
        <filter-name>loginCheckFilter</filter-name>
        <filter-class>filter.LoginCheckFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>loginCheckFilter</filter-name>
        <url-pattern>/home</url-pattern>
        <url-pattern>/HomePageServlet</url-pattern>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>FORWARD</dispatcher>
    </filter-mapping>
    <filter>
        <filter-name>authFilter</filter-name>
        <filter-class>filter.AuthFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>authFilter</filter-name>
        <url-pattern>/HomePageServlet</url-pattern>
        <url-pattern>/home</url-pattern>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>FORWARD</dispatcher>
    </filter-mapping>
    <servlet>
        <servlet-name>mail-confirmation</servlet-name>
        <jsp-file>/WEB-INF/jsp/mail-confirmation.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>mail-confirmation</servlet-name>
        <url-pattern>/mail-confirmation</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>login</servlet-name>
        <jsp-file>/WEB-INF/jsp/login.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>login</servlet-name>
        <url-pattern>/login</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>password-reissue</servlet-name>
        <jsp-file>/WEB-INF/jsp/password-reissue.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>password-reissue</servlet-name>
        <url-pattern>/password-reissue</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>confirm</servlet-name>
        <jsp-file>/WEB-INF/jsp/confirm.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>confirm</servlet-name>
        <url-pattern>/confirm</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>home</servlet-name>
        <jsp-file>/WEB-INF/jsp/home.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>home</servlet-name>
        <url-pattern>/home</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>register-profile</servlet-name>
        <jsp-file>/WEB-INF/jsp/register-profile.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>register-profile</servlet-name>
        <url-pattern>/register-profile</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>register-account</servlet-name>
        <jsp-file>/WEB-INF/jsp/register-account.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>register-account</servlet-name>
        <url-pattern>/register-account</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>search-friend</servlet-name>
        <jsp-file>/WEB-INF/jsp/search-friend.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>search-friend</servlet-name>
        <url-pattern>/search-friend</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>talk-list</servlet-name>
        <jsp-file>/WEB-INF/jsp/talk-list.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>talk-list</servlet-name>
        <url-pattern>/talk-list</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>talk</servlet-name>
        <jsp-file>/WEB-INF/jsp/talk.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>talk</servlet-name>
        <url-pattern>/talk</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>block-list</servlet-name>
        <jsp-file>/WEB-INF/jsp/block-list.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>block-list</servlet-name>
        <url-pattern>/block-list</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>wallet</servlet-name>
        <jsp-file>/WEB-INF/jsp/wallet.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>wallet</servlet-name>
        <url-pattern>/wallet</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>qr</servlet-name>
        <jsp-file>/WEB-INF/jsp/qr.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>qr</servlet-name>
        <url-pattern>/payment</url-pattern>
        <url-pattern>/my-account-qr</url-pattern>
        <url-pattern>/deposit-qr</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>clear</servlet-name>
        <jsp-file>/clear.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>clear</servlet-name>
        <url-pattern>/clear</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>mail</servlet-name>
        <jsp-file>/WEB-INF/jsp/mail.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>mail</servlet-name>
        <url-pattern>/mail</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>timeline</servlet-name>
        <jsp-file>/WEB-INF/jsp/timeline.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>timeline</servlet-name>
        <url-pattern>/timeline</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>create-timeline</servlet-name>
        <jsp-file>/WEB-INF/jsp/create-timeline.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>create-timeline</servlet-name>
        <url-pattern>/create-timeline</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>comment</servlet-name>
        <jsp-file>/WEB-INF/jsp/comment.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>comment</servlet-name>
        <url-pattern>/comment</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>profile-setting</servlet-name>
        <jsp-file>/WEB-INF/jsp/profile-setting.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>profile-setting</servlet-name>
        <url-pattern>/profile-setting</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>change-password</servlet-name>
        <jsp-file>/WEB-INF/jsp/change-password.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>change-password</servlet-name>
        <url-pattern>/change-password</url-pattern>
    </servlet-mapping>


    <servlet>
        <servlet-name>change-profile</servlet-name>
        <jsp-file>/WEB-INF/jsp/change-profile.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>change-profile</servlet-name>
        <url-pattern>/change-name</url-pattern>
        <url-pattern>/change-searchId</url-pattern>
        <url-pattern>/change-singleWord</url-pattern>
        <url-pattern>/change-top-picture</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>profile</servlet-name>
        <jsp-file>/WEB-INF/jsp/profile.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>profile</servlet-name>
        <url-pattern>/profile</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>comment-notice</servlet-name>
        <jsp-file>/WEB-INF/jsp/comment-notice.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>comment-notice</servlet-name>
        <url-pattern>/comment-notice</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>no-friend-profile</servlet-name>
        <jsp-file>/WEB-INF/jsp/no-friend-profile.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>no-friend-profile</servlet-name>
        <url-pattern>/no-friend-profile</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>deleted-account</servlet-name>
        <jsp-file>/WEB-INF/jsp/deleted-account.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>deleted-account</servlet-name>
        <url-pattern>/deleted-account</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>app</servlet-name>
        <jsp-file>/WEB-INF/jsp/app.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>app</servlet-name>
        <url-pattern>/app</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>resultDevice</servlet-name>
        <jsp-file>/WEB-INF/jsp/resultDevice.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>resultDevice</servlet-name>
        <url-pattern>/resultDevice</url-pattern>
    </servlet-mapping>

<!--    管理者ページ-->
    <filter>
        <filter-name>adminLoginCheckFilter</filter-name>
        <filter-class>admin.filter.AdminLoginCheckFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>adminLoginCheckFilter</filter-name>
        <url-pattern>/admin/UserListServlet</url-pattern>
        <url-pattern>/admin/AdminHomePageServlet</url-pattern>
        <url-pattern>/admin/ReportTimeLineServlet</url-pattern>
        <url-pattern>/admin/DeleteTimeLineServlet</url-pattern>
        <url-pattern>/admin/ReportChatListServlet</url-pattern>
        <url-pattern>/admin/TalkPageServlet</url-pattern>
        <url-pattern>/admin/ReleaseUserServlet</url-pattern>
        <url-pattern>/admin/SearchUserServlet</url-pattern>
        <url-pattern>/admin/ReleaseChatServlet</url-pattern>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>FORWARD</dispatcher>
    </filter-mapping>
    <filter>
        <filter-name>adminAuthFilter</filter-name>
        <filter-class>admin.filter.AdminAuthFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>adminAuthFilter</filter-name>
        <url-pattern>/admin/UserListServlet</url-pattern>
        <url-pattern>/admin/AdminHomePageServlet</url-pattern>
        <url-pattern>/admin/ReportTimeLineServlet</url-pattern>
        <url-pattern>/admin/DeleteTimeLineServlet</url-pattern>
        <url-pattern>/admin/ReportChatListServlet</url-pattern>
        <url-pattern>/admin/TalkPageServlet</url-pattern>
        <url-pattern>/admin/ReleaseUserServlet</url-pattern>
        <url-pattern>/admin/SearchUserServlet</url-pattern>
        <url-pattern>/admin/ReleaseChatServlet</url-pattern>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>FORWARD</dispatcher>
    </filter-mapping>

<!--管理者JSP-->
    <servlet>
        <servlet-name>adminLogin</servlet-name>
        <jsp-file>/WEB-INF/jsp/admin/login.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>adminLogin</servlet-name>
        <url-pattern>/admin/login</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>adminHome</servlet-name>
        <jsp-file>/WEB-INF/jsp/admin/home.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>adminHome</servlet-name>
        <url-pattern>/admin/home</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>adminChat</servlet-name>
        <jsp-file>/WEB-INF/jsp/admin/chat.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>adminChat</servlet-name>
        <url-pattern>/admin/chat</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>adminTalk</servlet-name>
        <jsp-file>/WEB-INF/jsp/admin/talk.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>adminTalk</servlet-name>
        <url-pattern>/admin/talk</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>adminUser</servlet-name>
        <jsp-file>/WEB-INF/jsp/admin/user.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>adminUser</servlet-name>
        <url-pattern>/admin/user</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>adminResultDevice</servlet-name>
        <jsp-file>/WEB-INF/jsp/admin/resultDevice.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>adminResultDevice</servlet-name>
        <url-pattern>/admin/resultDevice</url-pattern>
    </servlet-mapping>

<!--    お店の管理者-->
<!--    管理者のfilter-->
    <filter>
        <filter-name>shopAdminLoginCheckFilter</filter-name>
        <filter-class>adminShop.filter.ShopAdminLoginCheckFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>shopAdminLoginCheckFilter</filter-name>
         <url-pattern>/shopAdmin/ShopAdminHomeServlet</url-pattern>
         <url-pattern>/shopAdmin/CancelListServlet</url-pattern>
         <url-pattern>/shopAdmin/CancelItemServlet</url-pattern>
         <url-pattern>/shopAdmin/DateSortHistoryServlet</url-pattern>
         <url-pattern>/shopAdmin/DateSortCancelServlet</url-pattern>
         <url-pattern>/shopAdmin/PayServlet</url-pattern>
         <url-pattern>/shopAdmin/DepositMoneyServlet</url-pattern>
         <url-pattern>/shopAdmin/SettlementServlet</url-pattern>
         <url-pattern>/shopAdmin/InputMoneyServlet</url-pattern>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>FORWARD</dispatcher>
    </filter-mapping>

    <filter>
        <filter-name>shopAdminAuthFilter</filter-name>
        <filter-class>adminShop.filter.ShopAdminAuthFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>shopAdminAuthFilter</filter-name>
         <url-pattern>/shopAdmin/ShopAdminHomeServlet</url-pattern>
         <url-pattern>/shopAdmin/CancelListServlet</url-pattern>
         <url-pattern>/shopAdmin/CancelItemServlet</url-pattern>
         <url-pattern>/shopAdmin/DateSortHistoryServlet</url-pattern>
         <url-pattern>/shopAdmin/DateSortCancelServlet</url-pattern>
         <url-pattern>/shopAdmin/PayServlet</url-pattern>
         <url-pattern>/shopAdmin/DepositMoneyServlet</url-pattern>
         <url-pattern>/shopAdmin/SettlementServlet</url-pattern>
         <url-pattern>/shopAdmin/InputMoneyServlet</url-pattern>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>FORWARD</dispatcher>
    </filter-mapping>
<!--    お店の管理者JSP-->
    <servlet>
        <servlet-name>shopAdminLogin</servlet-name>
        <jsp-file>/WEB-INF/jsp/adminShop/login.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>shopAdminLogin</servlet-name>
        <url-pattern>/shopAdmin/login</url-pattern>
    </servlet-mapping>
</web-app>